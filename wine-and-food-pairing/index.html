<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Aldrich&family=Commissioner:wght@100..900&family=Sansation:wght@300;400;700&display=swap"
    rel="stylesheet">
  <title>Wine Finder :: Successfully pair your food with the most compatible wine</title>
  <style>
    body {
      font-family: "Commissioner", sans-serif;
      font-optical-sizing: auto;
      font-weight: 400;
      font-style: normal;
      font-size: 20px;
    }

    h1 {
      font-size: 4rem;
    }

    h1,
    h2,
    h3,
    h4 {
      font-weight: 700;
    }

    .pairing-app {
      max-width: 420px;
    }

    label {
      display: block;
      margin-bottom: 1rem;
    }

    select {
      width: 100%;
      padding: 0.5rem;
      margin-top: 0.25rem;
      font-size: 1rem;
    }

    .results {
      margin-top: 1.5rem;
      padding-top: 1rem;
      border-top: 1px solid #ddd;
    }

    ul {
      padding-left: 1.25rem;
    }
  </style>

</head>

<body>
  <header>
    <h1>Wine Pairing Finder</h1>

  </header>
  <div id="wine-pairing-app" class="pairing-app">

    <label>
      What are you eating?
      <select id="categorySelect">
        <option value="">Select a category</option>
      </select>
    </label>

    <div id="subCategoryWrapper" hidden>
      <label>
        How is it prepared?
        <select id="subCategorySelect">
          <option value="">Select a preparation</option>
        </select>
      </label>
    </div>

    <div id="results" class="results" hidden>
      <h3>Recommended Wine Style</h3>
      <p id="pairingStyle"></p>

      <h4>Suggested Wines</h4>
      <ul id="wineList"></ul>
    </div>
  </div>
  <script>
    // Assume pairingsData is your JSON array loaded beforehand

    const categorySelect = document.getElementById("categorySelect");
    const subCategorySelect = document.getElementById("subCategorySelect");
    const subCategoryWrapper = document.getElementById("subCategoryWrapper");
    const results = document.getElementById("results");
    const pairingStyle = document.getElementById("pairingStyle");
    const wineList = document.getElementById("wineList");

    // Populate category dropdown
    function loadCategories(data) {
      const categories = [...new Set(data.map(item => item.category))];
      categories.forEach(category => {
        const option = document.createElement("option");
        option.value = category;
        option.textContent = capitalize(category);
        categorySelect.appendChild(option);
      });
    }

    // Populate sub-categories based on selected category
    function loadSubCategories(category, data) {
      subCategorySelect.innerHTML = `<option value="">Select a preparation</option>`;

      const subCategories = data
        .filter(item => item.category === category)
        .map(item => item["sub-category"]);

      if (subCategories.length === 0) {
        subCategoryWrapper.hidden = true;
        return;
      }

      subCategoryWrapper.hidden = false;

      subCategories.forEach(sub => {
        const option = document.createElement("option");
        option.value = sub;
        option.textContent = capitalize(sub);
        subCategorySelect.appendChild(option);
      });
    }

    // Display results
    function showResults(match) {
      pairingStyle.textContent = match["pairing-style"];
      wineList.innerHTML = "";

      match["pairing-suggestions"].forEach(wine => {
        const li = document.createElement("li");
        li.textContent = wine;
        wineList.appendChild(li);
      });

      results.hidden = false;
    }

    // Capitalization helper
    function capitalize(text) {
      return text.charAt(0).toUpperCase() + text.slice(1);
    }

    // Event listeners
    categorySelect.addEventListener("change", () => {
      const category = categorySelect.value;
      results.hidden = true;

      if (!category || category == "Select a category") {
        subCategoryWrapper.hidden = true;
        return;
      }

      loadSubCategories(category, pairingsData);
    });

    subCategorySelect.addEventListener("change", () => {
      const category = categorySelect.value;
      const subCategory = subCategorySelect.value;

      if (!subCategory) {
        results.hidden = true;
        return;
      }

      const match = pairingsData.find(item =>
        item.category === category &&
        item["sub-category"] === subCategory
      );

      if (match) {
        showResults(match);
      }
    });


    const pairingsData =
      [
        {
          "id": 1,
          "category": "fish",
          "sub-category": "delicate, lean fish",
          "food-array": ["Tilapia", "Sole", "Flounder", "Sea Bass"],
          "pairing-style": "light, crisp whites that won’t overpower subtle flavors",
          "pairing-suggestions": ["Pinot Gris", "Pinot Grigio", "Sauvignon Blanc", "Albariño", "Vinho Verde"]
        },
        {
          "id": 2,
          "category": "fish",
          "sub-category": "rich, oily fish",
          "food-array": ["Salmon", "Tuna", "Mackerel", "Arctic Char"],
          "pairing-style": "medium-bodied whites or light reds with good acidity",
          "pairing-suggestions": ["Chardonnay", "Viognier", "Rosé", "Pinot Noir", "Gamay"]
        },
        {
          "id": 3,
          "category": "chicken",
          "sub-category": "simply roasted or grilled chicken",
          "food-array": ["Roast Chicken", "Grilled Chicken Breast"],
          "pairing-style": "medium-bodied whites or light reds that complement without dominating",
          "pairing-suggestions": ["Chardonnay", "Sauvignon Blanc", "Pinot Noir", "Gamay"]
        },
        {
          "id": 4,
          "category": "chicken",
          "sub-category": "rich or creamy chicken dishes",
          "food-array": ["Chicken Alfredo", "Chicken Pot Pie", "Chicken Fricassée"],
          "pairing-style": "round, fuller-bodied whites with texture",
          "pairing-suggestions": ["Oaked Chardonnay", "Viognier", "Marsanne", "White Rhône Blend"]
        },
        {
          "id": 5,
          "category": "beef",
          "sub-category": "slow-cooked and braised beef",
          "food-array": ["Osso Buco", "Beef Shank", "Short Ribs", "Beef Stew"],
          "pairing-style": "full-bodied reds with structure to match richness",
          "pairing-suggestions": ["Cabernet Sauvignon", "Syrah", "Malbec", "Nebbiolo"]
        },
        {
          "id": 6,
          "category": "beef",
          "sub-category": "grilled or seared steaks",
          "food-array": ["Ribeye", "New York Strip", "Filet Mignon"],
          "pairing-style": "bold reds with firm tannins and depth",
          "pairing-suggestions": ["Cabernet Sauvignon", "Bordeaux Blend", "Tempranillo", "Zinfandel"]
        },
        {
          "id": 7,
          "category": "pork",
          "sub-category": "roasted or grilled pork",
          "food-array": ["Pork Chop", "Pork Tenderloin", "Roast Pork"],
          "pairing-style": "medium-bodied wines with good acidity and balance",
          "pairing-suggestions": ["Pinot Noir", "Grenache", "Chenin Blanc", "Riesling"]
        },
        {
          "id": 8,
          "category": "lamb",
          "sub-category": "herb-roasted or grilled lamb",
          "food-array": ["Rack of Lamb", "Lamb Chops", "Leg of Lamb"],
          "pairing-style": "earthy, full-bodied reds that complement savory flavors",
          "pairing-suggestions": ["Syrah", "Cabernet Sauvignon", "Bordeaux Blend", "Tempranillo"]
        },
        {
          "id": 9,
          "category": "vegetarian",
          "sub-category": "roasted vegetables and hearty plant-based dishes",
          "food-array": ["Mushroom Risotto", "Roasted Root Vegetables", "Eggplant Parmesan"],
          "pairing-style": "wines with earthiness or brightness depending on preparation",
          "pairing-suggestions": ["Pinot Noir", "Gamay", "Chardonnay", "Sangiovese"]
        },
        {
          "id": 10,
          "category": "cheese",
          "sub-category": "soft and creamy cheeses",
          "food-array": ["Brie", "Camembert", "Triple-Crème Cheese"],
          "pairing-style": "acid-driven whites or sparkling wines to cut richness",
          "pairing-suggestions": ["Champagne", "Cava", "Chenin Blanc", "Sauvignon Blanc"]
        },
        {
          "id": 11,
          "category": "dessert",
          "sub-category": "chocolate-based desserts",
          "food-array": ["Chocolate Cake", "Brownies", "Chocolate Mousse"],
          "pairing-style": "rich, sweet wines with enough body to match chocolate intensity",
          "pairing-suggestions": ["Port", "Banyuls", "Madeira", "Late Harvest Zinfandel"]
        },
        {
          "id": 12,
          "category": "dessert",
          "sub-category": "fruit-based desserts",
          "food-array": ["Apple Tart", "Berry Cobbler", "Peach Galette"],
          "pairing-style": "sweet or off-dry wines with bright acidity",
          "pairing-suggestions": ["Moscato d’Asti", "Late Harvest Riesling", "Sauternes"]
        },
        {
          "id": 13,
          "category": "dessert",
          "sub-category": "cream and custard desserts",
          "food-array": ["Crème Brûlée", "Panna Cotta", "Flan"],
          "pairing-style": "silky, sweet wines that echo creamy textures",
          "pairing-suggestions": ["Sauternes", "Tokaji", "Late Harvest Chenin Blanc"]
        },
        {
          "id": 14,
          "category": "dessert",
          "sub-category": "nut-based and caramel desserts",
          "food-array": ["Pecan Pie", "Baklava", "Caramel Tart"],
          "pairing-style": "oxidative or nutty sweet wines that mirror caramelized flavors",
          "pairing-suggestions": ["Tawny Port", "Pedro Ximénez Sherry", "Madeira"]
        },
        {
          "id": 15,
          "category": "dessert",
          "sub-category": "light and fresh desserts",
          "food-array": ["Lemon Tart", "Angel Food Cake", "Sorbet"],
          "pairing-style": "light, aromatic, and refreshing sweet wines",
          "pairing-suggestions": ["Moscato d’Asti", "Prosecco", "Ice Wine"]
        },
        {
          "id": 16,
          "category": "fish",
          "sub-category": "medium textured fish",
          "food-array": ["Cod", "Haddock", "Halibut"],
          "pairing-style": "medium bodied whites",
          "pairing-suggestions": ["Unoaked Chardonnay", "Pinot Gris", "Pinot Grigio", "Vermentino"]
        },
        {
          "id": 17,
          "category": "fish",
          "sub-category": "shellfish",
          "food-array": ["Lobster", "Mussel", "Oysters"],
          "pairing-style": "crisp whites or sparkling wines",
          "pairing-suggestions": ["Sauvignon Blanc", "Pinot Grigio", "Chardonnay", "Champagne", "Prosecco"]
        },
        {
          "id": 18,
          "category": "sauce",
          "sub-category": "zesty/citrusy sauce",
          "food-array": [],
          "pairing-style": "",
          "pairing-suggestions": ["Sauvignon Blanc", "Muscadet", "Grüner Vetliner"]
        },
        {
          "id": 19,
          "category": "sauce",
          "sub-category": "rich/creamy sauce",
          "food-array": [],
          "pairing-style": "medium-bodied white or sparkling",
          "pairing-suggestions": ["Oaked Chardonnay", "Viognier", "Champagne"]
        },
        {
          "id": 20,
          "category": "sauce",
          "sub-category": "spicy/asian sauce",
          "food-array": [],
          "pairing-style": "",
          "pairing-suggestions": ["Reisling (off-dry)", "Gewurtztraminer", "gruner Vetliner", "Rosé"]
        },
        {
          "id": 21,
          "category": "sauce",
          "sub-category": "grilled/bbq",
          "food-array": [],
          "pairing-style": "light, chilled red wines or dry rosé",
          "pairing-suggestions": ["Pinot Noir", "Beaujolais", "Rosé"]
        },
        {
          "id": 22,
          "category": "beef",
          "sub-category": "rich, fatty beef",
          "food-array": ["Ribeye Steak", "Prime Rib", "Beef Short Ribs", "Bone-on Strip Steak"],
          "pairing-style": "reds with strong tannins",
          "pairing-suggestions": ["Cabernet Sauvignon", "Malbec", "Syrah/Shiraz", "Bordeaux Blend"]
        },
        {
          "id": 23,
          "category": "beef",
          "sub-category": "lean beef",
          "food-array": ["Filet Mignon", "Beef Tenderloin", "Eye of Round"],
          "pairing-style": "delicate to medium bodied reds",
          "pairing-suggestions": ["Pinot Noir", "Merlot", "Gamay (Beaujolais)", "Grenache"]
        },
        {
          "id": 24,
          "category": "beef",
          "sub-category": "sauces with beef",
          "food-array": ["Steak au Poivre", "Beef with Muchroom or red wine sauce", "Pepper-crusted steak"],
          "pairing-style": "medium-bodied, complex flavored reds",
          "pairing-suggestions": ["Syrah (peppery)", "Zinfadel (spicy+jammy)", "Tempranillio (savory+earthy)", "Carmenére (herbal notes)"]
        },
        {
          "id": 25,
          "category": "beef",
          "sub-category": "slow-cooked and braised beef",
          "food-array": ["Osso Buco", "Beef Shank", "Beef Bourguignon", "Pot Roast", "Braised Short Ribs"],
          "pairing-style": "medium to heavy bodied, acidic reds",
          "pairing-suggestions": ["Nebbiolo", "Barolo", "Barbaresco", "Sangiovese", "Cabernet Franc"]
        },
        {
          "id": 26,
          "category": "beef",
          "sub-category": "ground beef & casual dishes",
          "food-array": ["Burgers", "Meatloaf", "Tacos", "Moco Loco", "Sloppy Joes"],
          "pairing-style": "fun, festive, medium bodied reds",
          "pairing-suggestions": ["Zinfandel", "Malbec", "Cotes du Rhone", "Lambrusco (dry)"]
        },
        {
          "id": 27,
          "category": "beef",
          "sub-category": "spiced, asian, mediteranean beef dishes",
          "food-array": ["Bulgogi", "Stir-fry", "kebabs", "Shwarma", "Chili con Carne", "Curry"],
          "pairing-style": "flexible, medium bodied reds, off-dry reds, or rose",
          "pairing-suggestions": ["Zinfandel", "Grenache Blend", "Red Blend (off-dry)", "Rosé"]
        },
      ]

    // Initialize app
    loadCategories(pairingsData);
  </script>

</body>

</html>